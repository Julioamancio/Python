<!-- Nível Avançado - Apostila Python (3 exemplos por tópico) -->

<!-- PROGRAMAÇÃO ORIENTADA A OBJETOS (POO) -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-cube text-primary"></i>
    <span class="topic-text">Programação Orientada a Objetos (POO)</span>
</div>
<p class="fs-3 mb-4">
    Programação Orientada a Objetos (POO) é um paradigma que organiza o código em classes e objetos, aproximando a lógica do mundo real. Permite reutilização, organização, manutenção e expansão mais fácil dos programas.
</p>

<!-- CLASSES E OBJETOS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-shapes text-success"></i>
    <span class="topic-text">Classes e Objetos</span>
</div>
<p class="fs-3 mb-4">
    <b>Classe</b> é o molde, enquanto <b>objeto</b> é a instância criada a partir desse molde. Objetos podem ter atributos (dados) e métodos (funções).
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># Classe vazia, criando objeto do tipo Pessoa
class Pessoa:
    pass
p = Pessoa()
print(type(p))  # <class '__main__.Pessoa'></pre>
    <b>Exemplo 2:</b>
    <pre># Classe com método
class Animal:
    def falar(self):
        print("Som de animal")
a = Animal()
a.falar()</pre>
    <b>Exemplo 3:</b>
    <pre># Classe com atributo definido no construtor
class Livro:
    def __init__(self, titulo):
        self.titulo = titulo
livro = Livro("Dom Casmurro")
print(livro.titulo)</pre>
</div>

<!-- MÉTODOS E ATRIBUTOS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-gear text-info"></i>
    <span class="topic-text">Métodos e Atributos</span>
</div>
<p class="fs-3 mb-4">
    <b>Atributos</b> são variáveis ligadas ao objeto (ou à classe). <b>Métodos</b> são funções dentro da classe, que podem manipular os atributos ou executar ações.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># Método simples
class Carro:
    def buzinar(self):
        print("Bip bip!")
c = Carro()
c.buzinar()</pre>
    <b>Exemplo 2:</b>
    <pre># Atributo de classe e método que altera atributo
class Conta:
    saldo = 0  # atributo de classe
    def depositar(self, valor):
        self.saldo += valor
conta = Conta()
conta.depositar(100)
print(conta.saldo)</pre>
    <b>Exemplo 3:</b>
    <pre># Atributo de instância definido no construtor
class Usuario:
    def __init__(self, nome):
        self.nome = nome
    def ola(self):
        print(f"Olá, {self.nome}!")
u = Usuario("Ana")
u.ola()</pre>
</div>

<!-- CONSTRUTOR (__init__) -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-plug text-warning"></i>
    <span class="topic-text">Construtor (<code>__init__</code>)</span>
</div>
<p class="fs-3 mb-4">
    O construtor <code>__init__</code> é chamado automaticamente ao criar um objeto. Serve para inicializar os atributos do objeto.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># Construtor define atributos obrigatórios
class Produto:
    def __init__(self, nome, preco):
        self.nome = nome
        self.preco = preco
p = Produto("Mouse", 50.0)
print(p.nome, p.preco)</pre>
    <b>Exemplo 2:</b>
    <pre># Construtor pode executar ações ao criar objeto
class Pessoa:
    def __init__(self):
        print("Pessoa criada")
Pessoa()</pre>
    <b>Exemplo 3:</b>
    <pre># Construtor com mais de um atributo
class Retangulo:
    def __init__(self, largura, altura):
        self.largura = largura
        self.altura = altura
r = Retangulo(2, 4)
print(r.largura * r.altura)  # área
    </pre>
</div>

<!-- HERANÇA -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-arrow-turn-up text-primary"></i>
    <span class="topic-text">Herança</span>
</div>
<p class="fs-3 mb-4">
    Herança permite criar uma nova classe baseada em outra, herdando atributos e métodos. É útil para reaproveitar código e modelar relações "é um(a)".
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># Cachorro herda método falar de Animal
class Animal:
    def falar(self):
        print("Som...")
class Cachorro(Animal):
    pass
c = Cachorro()
c.falar()</pre>
    <b>Exemplo 2:</b>
    <pre># Carro herda de Veiculo e adiciona novo método
class Veiculo:
    def mover(self):
        print("Movendo")
class Carro(Veiculo):
    def buzinar(self):
        print("Bip bip!")
carro = Carro()
carro.mover()
carro.buzinar()</pre>
    <b>Exemplo 3:</b>
    <pre># Funcionario herda de Pessoa e adiciona novo método
class Pessoa:
    def __init__(self, nome):
        self.nome = nome
class Funcionario(Pessoa):
    def apresentar(self):
        print("Sou", self.nome)
f = Funcionario("Leo")
f.apresentar()</pre>
</div>

<!-- ENCAPSULAMENTO -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-shield-halved text-secondary"></i>
    <span class="topic-text">Encapsulamento</span>
</div>
<p class="fs-3 mb-4">
    Encapsulamento protege os dados internos do objeto. Em Python, atributos com <code>_</code> são considerados protegidos e com <code>__</code> privados. Use métodos (get/set) para acessar atributos privados.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># __saldo é privado (acesso só por método)
class Conta:
    def __init__(self):
        self.__saldo = 0 # privado
    def depositar(self, valor):
        self.__saldo += valor
    def saldo(self):
        return self.__saldo
c = Conta()
c.depositar(100)
print(c.saldo())</pre>
    <b>Exemplo 2:</b>
    <pre># _protegido é convenção (pode acessar, mas evite)
class Exemplo:
    def __init__(self):
        self._protegido = 123 # protegido (convenção)
e = Exemplo()
print(e._protegido)</pre>
    <b>Exemplo 3:</b>
    <pre># Usando método para acessar atributo privado
class Pessoa:
    def __init__(self, nome):
        self.__nome = nome
    def get_nome(self):
        return self.__nome
p = Pessoa("Bia")
print(p.get_nome())</pre>
</div>

<!-- POLIMORFISMO -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-arrows-spin text-info"></i>
    <span class="topic-text">Polimorfismo</span>
</div>
<p class="fs-3 mb-4">
    Polimorfismo permite que métodos de mesmo nome se comportem de formas diferentes em classes distintas. Facilita trabalhar com grupos de objetos diferentes de forma genérica.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># Gato redefine o método falar de Animal
class Animal:
    def falar(self):
        print("Som...")
class Gato(Animal):
    def falar(self):
        print("Miau!")
a = Gato()
a.falar()</pre>
    <b>Exemplo 2:</b>
    <pre># Quadrado sobrescreve método area da classe base
class Forma:
    def area(self):
        return 0
class Quadrado(Forma):
    def __init__(self, l):
        self.l = l
    def area(self):
        return self.l * self.l
q = Quadrado(4)
print(q.area())</pre>
    <b>Exemplo 3:</b>
    <pre># Função genérica aceita qualquer objeto com falar
def exibir(animal):
    animal.falar()
class Cachorro:
    def falar(self):
        print("Au!")
class Pato:
    def falar(self):
        print("Quack!")
exibir(Cachorro())
exibir(Pato())</pre>
</div>

<!-- MANIPULAÇÃO AVANÇADA DE ARQUIVOS E DIRETÓRIOS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-folder-tree text-warning"></i>
    <span class="topic-text">Manipulação Avançada de Arquivos e Diretórios (<code>os, shutil, pathlib</code>)</span>
</div>
<p class="fs-3 mb-4">
    Manipular arquivos e pastas profissionalmente exige comandos para listar, criar, mover e copiar. Python traz módulos nativos como <code>os</code> (operações básicas), <code>shutil</code> (cópia, remoção) e <code>pathlib</code> (moderno e orientado a objetos).
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (listar arquivos):</b>
    <pre># Lista arquivos da pasta atual
import os
print(os.listdir("."))</pre>
    <b>Exemplo 2 (copiar arquivo):</b>
    <pre># Copia arquivo de um local para outro
import shutil
shutil.copy("origem.txt", "destino.txt")</pre>
    <b>Exemplo 3 (criar pasta com pathlib):</b>
    <pre># Cria diretório se não existir
from pathlib import Path
Path("nova_pasta").mkdir(exist_ok=True)</pre>
</div>

<!-- MÓDULO DATETIME E MANIPULAÇÃO DE DATAS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-calendar-days text-success"></i>
    <span class="topic-text">Módulo datetime e manipulação de datas</span>
</div>
<p class="fs-3 mb-4">
    O módulo <code>datetime</code> facilita lidar com datas e horários, calcular diferenças, formatar e criar datas programaticamente.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (agora):</b>
    <pre># Data e hora atuais
from datetime import datetime
print(datetime.now())</pre>
    <b>Exemplo 2 (formatação):</b>
    <pre># Formata data para texto
from datetime import datetime
data = datetime(2025, 6, 6)
print(data.strftime("%d/%m/%Y"))</pre>
    <b>Exemplo 3 (diferença):</b>
    <pre># Diferença entre duas datas
from datetime import date
d1 = date(2025, 1, 1)
d2 = date(2025, 6, 6)
print((d2 - d1).days)</pre>
</div>

<!-- EXPRESSÕES REGULARES (re) -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-asterisk text-primary"></i>
    <span class="topic-text">Expressões Regulares (<code>re</code>)</span>
</div>
<p class="fs-3 mb-4">
    Expressões regulares são padrões para buscar, validar ou substituir textos complexos. O módulo <code>re</code> permite buscas, substituições e validações poderosas.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (procurar):</b>
    <pre># Busca por números na string
import re
texto = "abc123"
print(re.search(r"\d+", texto))</pre>
    <b>Exemplo 2 (substituir):</b>
    <pre># Troca hífen por barra
import re
s = "2025-06-06"
print(re.sub("-", "/", s))</pre>
    <b>Exemplo 3 (validar e-mail):</b>
    <pre># Valida formato de e-mail
import re
email = "user@mail.com"
pattern = r"^[\w\.-]+@[\w\.-]+\.\w+$"
print(bool(re.match(pattern, email)))</pre>
</div>

<!-- COMPREENSÃO DE DICIONÁRIOS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-table-cells-large text-info"></i>
    <span class="topic-text">Compreensão de Dicionários</span>
</div>
<p class="fs-3 mb-4">
    Assim como list comprehensions, é possível criar dicionários de forma concisa com <code>{chave:valor for ...}</code>, facilitando transformações e filtragens.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (quadrados):</b>
    <pre># Cria dicionário de quadrados
quadrados = {x: x*x for x in range(1, 4)}
print(quadrados)</pre>
    <b>Exemplo 2 (invertendo):</b>
    <pre># Inverte chave e valor
d = {"a": 1, "b": 2}
inv = {v: k for k, v in d.items()}
print(inv)</pre>
    <b>Exemplo 3 (condicional):</b>
    <pre># Só pega pares e marca como "par"
nums = [1,2,3,4]
pares = {n: "par" for n in nums if n%2==0}
print(pares)</pre>
</div>

<!-- FUNÇÕES DECORADORAS (@decorator) -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-magic-wand-sparkles text-warning"></i>
    <span class="topic-text">Funções Decoradoras (<code>@decorator</code>)</span>
</div>
<p class="fs-3 mb-4">
    Decoradores são funções que "envolvem" outras funções para modificar ou ampliar seu comportamento, sem alterar seu código original. Muito usados para logging, autenticação, validação, etc.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1:</b>
    <pre># Decorador simples mostra mensagens antes e depois
def decorador(func):
    def wrapper():
        print("Antes")
        func()
        print("Depois")
    return wrapper
@decorador
def ola():
    print("Olá!")
ola()</pre>
    <b>Exemplo 2:</b>
    <pre># Decorador que transforma retorno em maiúsculas
def maiuscula(func):
    def wrapper(texto):
        return func(texto).upper()
    return wrapper
@maiuscula
def fala(msg):
    return msg
print(fala("bom dia"))</pre>
    <b>Exemplo 3 (com argumentos):</b>
    <pre># Decorador que repete a função duas vezes
def repetir(func):
    def wrapper(*args, **kwargs):
        func(*args, **kwargs)
        func(*args, **kwargs)
    return wrapper
@repetir
def saudacao(nome):
    print("Oi,", nome)
saudacao("Ana")</pre>
</div>

<!-- GERADORES AVANÇADOS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-arrow-up-wide-short text-success"></i>
    <span class="topic-text">Geradores Avançados</span>
</div>
<p class="fs-3 mb-4">
    Geradores avançados permitem criar sequências infinitas, streams de dados e processamento eficiente, pois só geram um valor por vez, conforme o consumo.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (números infinitos):</b>
    <pre># Gerador infinito, use com next()
def infinitos():
    n = 0
    while True:
        yield n
        n += 1
g = infinitos()
for _ in range(3):
    print(next(g))</pre>
    <b>Exemplo 2 (fibonacci):</b>
    <pre># Gera sequência de Fibonacci infinita
def fibonacci():
    a, b = 0, 1
    while True:
        yield a
        a, b = b, a+b
fib = fibonacci()
for _ in range(5):
    print(next(fib))</pre>
    <b>Exemplo 3 (palavras):</b>
    <pre># Gera palavras de um texto
def palavras(texto):
    for p in texto.split():
        yield p
for palavra in palavras("Python é incrível"):
    print(palavra)</pre>
</div>

<!-- MÓDULO JSON -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-code text-primary"></i>
    <span class="topic-text">Módulo <code>json</code></span>
</div>
<p class="fs-3 mb-4">
    O módulo <code>json</code> permite ler e escrever dados no formato JSON (usado em APIs, integração de sistemas e arquivos de configuração).
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (dump):</b>
    <pre># Converte dicionário para JSON (string)
import json
d = {"a": 1, "b": 2}
s = json.dumps(d)
print(s)</pre>
    <b>Exemplo 2 (load):</b>
    <pre># Converte JSON (string) para dicionário
import json
s = '{"x": 5, "y": 9}'
d = json.loads(s)
print(d["x"])</pre>
    <b>Exemplo 3 (arquivo):</b>
    <pre># Salva e lê JSON de arquivo
import json
with open("dados.json", "w") as f:
    json.dump({"nome": "Ana"}, f)
with open("dados.json") as f:
    print(json.load(f))</pre>
</div>

<!-- SERIALIZAÇÃO (pickle) -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-box-archive text-secondary"></i>
    <span class="topic-text">Serialização (<code>pickle</code>)</span>
</div>
<p class="fs-3 mb-4">
    Serialização é transformar objetos Python em bytes, para salvar em arquivos ou enviar pela rede. O módulo <code>pickle</code> permite serializar/deserializar praticamente qualquer objeto Python.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (salvar):</b>
    <pre># Salva objeto em arquivo binário
import pickle
d = {"a": 1}
with open("arq.pkl", "wb") as f:
    pickle.dump(d, f)</pre>
    <b>Exemplo 2 (carregar):</b>
    <pre># Carrega objeto salvo com pickle
import pickle
with open("arq.pkl", "rb") as f:
    d = pickle.load(f)
print(d)</pre>
    <b>Exemplo 3 (lista):</b>
    <pre># Serializa e desserializa lista em bytes
import pickle
lista = [1,2,3]
pickle_bytes = pickle.dumps(lista)
print(pickle.loads(pickle_bytes))</pre>
</div>

<!-- MANIPULAÇÃO DE EXCEÇÕES PERSONALIZADAS -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-bug text-danger"></i>
    <span class="topic-text">Exceções Personalizadas</span>
</div>
<p class="fs-3 mb-4">
    Você pode criar suas próprias exceções (erros) para controlar situações específicas no seu sistema, herdando de <code>Exception</code>.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (definindo):</b>
    <pre># Define nova exceção e usa com raise
class ErroCustomizado(Exception):
    pass
try:
    raise ErroCustomizado("Falhou!")
except ErroCustomizado as e:
    print(e)</pre>
    <b>Exemplo 2:</b>
    <pre># Usando exceção personalizada em validação
class IdadeInvalida(Exception):
    pass
idade = -2
if idade < 0:
    raise IdadeInvalida("Idade negativa não pode!")</pre>
    <b>Exemplo 3:</b>
    <pre># Raise para erros comuns também
def divide(a, b):
    if b == 0:
        raise ZeroDivisionError("Não pode dividir por zero!")
    return a / b
try:
    divide(4, 0)
except ZeroDivisionError as e:
    print(e)</pre>
</div>

<!-- TESTES COM unittest OU pytest -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-vial text-info"></i>
    <span class="topic-text">Testes com <code>unittest</code> ou <code>pytest</code></span>
</div>
<p class="fs-3 mb-4">
    Testes automatizados garantem que seu código funciona como esperado. <code>unittest</code> é o módulo padrão do Python, <code>pytest</code> é uma biblioteca popular para testes mais simples e poderosos.
</p>
<div class="example-block mb-2">
    <b>Exemplo 1 (unittest):</b>
    <pre># Teste de função com unittest
import unittest
def soma(a, b): return a + b
class TesteSoma(unittest.TestCase):
    def test_soma(self):
        self.assertEqual(soma(2, 2), 4)
# unittest.main()</pre>
    <b>Exemplo 2 (pytest):</b>
    <pre># Teste simples com pytest (arquivo test_soma.py)
def soma(a, b): return a + b
def test_soma():
    assert soma(2, 3) == 5</pre>
    <b>Exemplo 3 (assert):</b>
    <pre># Teste rápido com assert
def dobro(x): return x*2
assert dobro(4) == 8
assert dobro(0) == 0</pre>
</div>

<!-- DESAFIO FINAL DO NÍVEL AVANÇADO -->
<div class="topic-title mt-5 mb-2">
    <i class="fa-solid fa-trophy text-success"></i>
    <span class="topic-text">Desafio Final do Nível Avançado</span>
</div>
<p class="fs-3 mb-3">
    <b>Desafio:</b>
</p>
<ul class="fs-3 mb-4">
    <li>Crie um sistema de cadastro de funcionários utilizando Programação Orientada a Objetos.</li>
    <li>Cada funcionário deve ter nome, cargo e salário.</li>
    <li>Implemente herança para criar um tipo Gerente, que além dos dados de funcionário, tenha um bônus.</li>
    <li>Inclua métodos para calcular o salário total (salário + bônus para gerente) e exibir os dados de cada funcionário.</li>
    <li>Adicione uma lista de funcionários e mostre a folha de pagamento completa usando polimorfismo.</li>
</ul>
<div class="example-block mb-5">
    <b>Solução sugerida (comentada):</b>
    <pre>
# Classe base para funcionário comum
class Funcionario:
    def __init__(self, nome, cargo, salario):
        self.nome = nome
        self.cargo = cargo
        self.salario = salario
    def salario_total(self):
        # Para funcionário comum, salário total é o próprio salário
        return self.salario
    def exibir(self):
        print(f"{self.nome} ({self.cargo}): R$ {self.salario_total():.2f}")

# Gerente herda de Funcionario e tem bônus
class Gerente(Funcionario):
    def __init__(self, nome, salario, bonus):
        super().__init__(nome, "Gerente", salario)
        self.bonus = bonus
    def salario_total(self):
        # Para gerente, soma bônus ao salário
        return self.salario + self.bonus

# Cadastro de funcionários na lista
equipe = [
    Funcionario("Ana", "Dev", 4000),
    Gerente("Bia", 7000, 2000),
    Funcionario("Carlos", "Suporte", 3500)
]

# Polimorfismo: todos têm método exibir e salario_total
for f in equipe:
    f.exibir()
    </pre>
</div>

<style>
.topic-title {
    font-size: 2.3rem;
    font-weight: 800;
    color: #1976d2;
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 10px;
}
.topic-title .fa-solid {
    font-size: 2.1rem;
}
.topic-title .topic-text {
    font-size: 2.3rem;
}
.code-pill {
    background: #e3f2fd;
    border-radius: 7px;
    padding: 5px 16px;
    font-size: 1.22rem;
    color: #1976d2;
    margin-left: 7px;
    margin-right: 7px;
    font-family: 'Fira Mono', monospace;
}
.example-block {
    background: #fffbe7;
    border-left: 6px solid #ffd600;
    border-radius: 14px;
    padding: 20px 36px 17px 36px;
    font-size: 1.29rem;
    margin-top: 10px;
}
.example-block pre {
    background: #e3f2fd;
    border-radius: 9px;
    font-size: 1.21rem;
    padding: 10px 16px;
    margin-bottom: 13px;
    margin-top: 7px;
    font-family: 'Fira Mono', 'Consolas', monospace;
}
.fs-3 { font-size: 1.55rem !important; }
ul.fs-3 li { margin-bottom: 6px; }
@media (max-width: 1200px) {
    .example-block { padding-left: 10px; padding-right: 10px;}
}
@media (max-width: 900px) {
    .topic-title { font-size: 1.3rem; }
    .topic-title .fa-solid { font-size: 1.25rem; }
    .topic-title .topic-text { font-size: 1.19rem;}
    .fs-3 { font-size: 1.10rem !important; }
    .example-block { font-size: 1.09rem;}
}
</style>